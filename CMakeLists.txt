PROJECT(pycasso)

OPTION(SYSTEM_SDLOPENGL "SDLOpenGL Support" ON)
OPTION(DEBUG "Debug settings" OFF)

IF(DEBUG)
	SET(CMAKE_CXX_FLAGS "-Wno-deprecated -g")
ELSE(DEBUG)
	SET(CMAKE_CXX_FLAGS "-Wno-deprecated -O3")
ENDIF(DEBUG)

ADD_SUBDIRECTORY(src)

SET(SOURCE_FILES ${SOURCE_FILES}
	src/Pycasso.cpp
	src/Canvas.cpp
	src/Image.cpp
	src/EventQ.cpp)

SET(INCLUDE_DIRS include)

IF(SYSTEM_SDLOPENGL)
	INCLUDE(${CMAKE_ROOT}/Modules/FindSDL.cmake)

	SET(SOURCE_FILES ${SOURCE_FILES}
		src/CanvasOpenGL.cpp
		src/ScreenSDLOpenGL.cpp
		src/ImageOpenGL.cpp
		src/EventQSDL.cpp)

	SET(DEFINITIONS ${DEFINITIONS} -D__PYCASSO_SYSTEM_SDLOPENGL)

	SET(INCLUDE_DIRS ${INCLUDE_DIRS} ${SDL_INCLUDE_DIR})
ENDIF(SYSTEM_SDLOPENGL)

ADD_DEFINITIONS(${DEFINITIONS})

INCLUDE_DIRECTORIES(${INCLUDE_DIRS})

ADD_LIBRARY(pycasso STATIC ${SOURCE_FILES})
TARGET_LINK_LIBRARIES(pycasso SDL GL GLU png)

ADD_EXECUTABLE(demo1 demos/demo1.cpp)
TARGET_LINK_LIBRARIES(demo1 pycasso)

